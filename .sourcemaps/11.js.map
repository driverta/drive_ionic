{"version":3,"sources":["../../src/pages/leaderboard/leaderboard.module.ts","../../src/pages/leaderboard/leaderboard.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { SearchPage } from './leaderboard';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SearchPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    SearchPage\r\n  ]\r\n})\r\nexport class SearchPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/leaderboard/leaderboard.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\n\r\nimport { User } from '../../providers/providers';\r\nimport { Levels } from '../../providers/providers';\r\n\r\nimport firebase from 'firebase';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-leaderboard',\r\n  templateUrl: 'leaderboard.html'\r\n})\r\nexport class SearchPage {\r\n\r\n  currentItems: any = [];\r\n  timeFilter = \"All Time\"\r\n  username: any;\r\n  loop = 0;\r\n  gains = 0;\r\n\r\n  players = [\r\n    {name: \"tdriver369\", level: 7, gains: 375},\r\n    {name: \"battleblake\", level: 4, gains: 235},\r\n    {name: \"fratdromazos\", level: 2, gains: 105}\r\n  ]\r\n\r\n  constructor(public user: User, public levels: Levels, public navCtrl: NavController, public navParams: NavParams) { }\r\n\r\n  addCompetitors() {\r\n    this.navCtrl.push('AddCompetitorsPage')\r\n  }\r\n\r\n  ionViewWillEnter(){\r\n    this.username = this.user._user;\r\n    this.players = [];\r\n\r\n    var queryPlayers = firebase.database().ref('/' + this.username + '/competing');\r\n    queryPlayers.once(\"value\").then( snapshot => {\r\n      this.loop = 0;\r\n      snapshot.forEach( childSnapshot => {\r\n        this.loop++\r\n        var childData1 = childSnapshot.val();\r\n        var data = {name: childData1.name, level: 0, gains: 0};\r\n        this.players.push(data);\r\n        if ( snapshot.numChildren() == this.loop ) {\r\n          this.getGains()\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getGains() {\r\n    this.players.forEach( (value, index) => {\r\n      var queryGains = firebase.database().ref('/' + value.name + '/gains');\r\n      queryGains.once(\"value\").then( snapshot => {\r\n        this.loop = 0;\r\n        this.gains = 0;\r\n        snapshot.forEach( childSnapshot => {\r\n          this.loop++\r\n          var childData1 = childSnapshot.val();\r\n          var gains = childData1.gains;\r\n          this.gains = this.gains + gains\r\n          if ( snapshot.numChildren() == this.loop ) {\r\n            value.gains = this.gains\r\n            this.setLevel(this.gains, index)\r\n          }\r\n        });\r\n      });\r\n    })\r\n  }\r\n\r\n  setLevel (gains, i) {\r\n    this.levels._levels.forEach( value => {\r\n      if (gains > value.totalPoints) {\r\n        this.players[i].level = value.level;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/leaderboard/leaderboard.ts"],"sourceRoot":""}